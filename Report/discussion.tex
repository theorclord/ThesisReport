\chapter{Discussion}
\section{Basic design choices} 
\subsection{Flavour text combinations}
Early on we knew that we would have to have the flavour text and events being shown to the players. Showing it to the player required generating connected strings in some form that could relate to what was happening in game terms.. 
Then the question ahead was: How would this be done?
We started by having fully formed lines of text for every possible outcome and event, but realized that this was not beneficial, and that it would not create enough diversity to work as a proof of concept. 
The initial fully formed event text were rigid and would not scale well with the implementation of more pieces or with new combinations. Each time a new piece would be added, or a piece removed, would require new events to be fully written to account for the change. 

All the text strings needed to be broken down into bits and pieces that would somehow connect with each other and combine into one fully functional sentence. 
There was more than one way to approach this problem.
First way was to create smaller pieces of text, that would show their meaning, but not really combine into a well formulated sentence. This was tested out for a while, but was not the optimum solution we wanted for our product.
The next way was to generate a premade set of combinations for the events. This would mean that every possible combination that was "wanted" in the game, would have to be made ahead of time. And with every option, there would have to be rewards and outcomes for each. Again for each outcome, there would have to be at least one for "success", one for "Neutral" and one for "Enemy". With all these pieces that had to be premade, the realization was that it was sort of the right way, but that it should be the other way around. The way to go would be to generate smaller blocks of text for all outcome and option pieces, and then have extra flavour that would tie it all together. This meant a drastic reduction in how much flavour would have to be premade, and the possible combinations would be far greater. 


\subsection{Option combinations}

There are a multitude of ways to come up with a way to combine the options the players will have. Some that were touched will be discussed here.
The first way is to have a random selection. This would mean to just have a collection of all the possible requirements that would constitute an option, and having a number of them be selected at random.\\
Some good things about this, is that it reduces the need for expensive and complex computing, as it only requires a simple random value to be chosen. This can of course also be influenced by a seed or a bias counter leaning towards a specific option, however then it would not be completely random either.\\
The fact that it is so simplistic and random, means that several things can go wrong. The same option can be selected multiple times, there may not be enough options to choose from so that the options might not be diverse enough, and the overall feel that the options are based on anything might get lost by the overwhelming randomness, just to mention some.\\

Another way to generate the options is to have selection based on the location. That is locations as in the types of locations i.e. a mine, forest, lake, etc. Then the question becomes what can each of the locations hold? A mine might be rich in minerals, metals and rocks, while a forest can have different plant life and a lake can have hidden treasures in its depths. These are all thoughts that needs to be figured out for this setup to work. And if this is to be the chosen method for generating the event options, how many different possibilities are needed for each location, and then how many variations of each possibility is needed? The resulting collection can quickly become very large. 
That is not necessarily a bad thing, though. Having a large base of possible options is, in this game setting, a good thing. Lots of options means lots of variety. But then comes the issue which is the flavor. To be able to present the options to the players, there needs to be a substantial amount of flavor to go with the options. If not, then having this assortment, will quickly become obsolete and bland.\\

Basing the condition options on the factions can be an interesting way of generating them, because it opens up the possibility of lore behind each of the factions. To take one example from our game, the "Highbournes". The highbournes are made to be like elves. High and mighty with much knowledge about the nature and stars, and generally elves have a well known story attached to them. By using known types of mythical beings, one can get a good start and overview of where to begin. By looking into already existing books and stories about these creatures, one can get ideas and inspiration to what can be implemented in the solution. Elves might have high knowledge of potions and healing, so that would mean that a possible option could be to help them out with new recipes, materials that are foreign to them, or just introduce them to "modern" technology.
However, can you cross the border between known lore and made up new lore? Does it break the feeling of familiarity?
Yes, you can. It would be weird if in "The Lord of the Rings" (J. R. R. Tolkien, 1937-1949) you would see an Elf using a machine gun.
But then again, who is to say that new lore and new creatures can not be made. It is just important to make it clear that this is what is happening in that case.\\

While on the topic of factions, another idea on how to combine the options would be to use the standing the players have with each faction. It is closely based on the factions and their lore, as described above, but when taking a relationship into account, things can get different and interesting. Using the Highbournes as example again, if the players have a good standing with them, i.e. friendly, the options might be different from what they could be if they were enemies. A friend might want to lend out some resources, have their available people assist them in tasks and quest, whilst an enemy would perhaps steal resources from them, or destroy their buildings or kill their people. The differences are immense. Taking the relationship to each faction into account opens up for a different way of telling the story of the game to the players, and it also allows for drastic changes to be made. This is something that must be considered when thinking about how the game should look and feel. In this case, the feel should be more the one of exploration of unknown islands and locations, and the creatures living there are there, not necessarily for the lore itself, but more as an extra asset that the players hopefully can relate to. The factions might have wars against themselves, and they might see you, the outsiders, roaming around with mystical potions and weird machinery. If a war or battle is going on between two factions, would the players want to assist? Or just let them be? These are all thoughts that needs to be taken into consideration when basing options on factions and the players standing with them.\\


Selection based on previous events
One of the nicer things when combining a board game with a digital application, is the fact that there suddenly is access to memory. And with memory, comes alternatives and opportunities. A thought that instantly comes to mind, is basing later events and options on what has previously happened in the game. One can use statistics to see which options is more likely to be chosen, and build new ones of similar sort, or one could go the complete other way, and force the players to be more diverse and have them pick between options that they have been less likely to choose in the past. Finding patterns and frequent choices can be an option and a tool in designing new options. But using this method, requires that the text and feel of the options are coherent. If they don't make sense, the feel of the game can suffer from it. So going in this direction will take a lot of thought as to how everything should be formulated in order for it to be presented in a good way to the players. A thought on how to proceed in this direction, is to have building blocks, that are somewhat loosely based on the possible standings a player can have with each faction, then making sure that each of those blocks have some sort of meaning to both the faction and the game story itself. Making sure that they can all be combined with each other and persistently keeping in mind all the conditions, would be key in this approach.\\

As mentioned before having saved data is a big asset to a game, board games specifically. Saving up all the data of what has previously happened makes it possible to create new content that is taking into account what has previously happened. In a game like this, one could base the next options and outcomes on what the players have gotten during the events and actions leading up this far. If the players have been taking the easy option all the way, maybe it is time to challenge them and take away the possibility for an easy action. Maybe all the outcomes they have gotten so far has been negative? Having access to the saved data, and also "when" the results occurred, can be a valuable asset, as it gives the opportunity to change the entire course of the game. It makes it possible to have adaptive difficulties, and one can also give the players the option to select and change difficulty on the go. Combining the options based on the previous results, can be tricky, however, if the options and the results do need to be directly linked to what has happened before, one has to take into account that it is not only the values that are presented to the players, but also the flavor texts. And the flavor text is what allows the players to become part of the "world" that is the setting in the game itself. If there are major incoherences, the feeling of a polished experience can easily be broken. If going for this way of generating content, this fact must be in the back of the head. It can definitely be used as a way of generating the content, but there might need to be a secondary check whether or not the texting of the options and results are working and fitting. Grammars and the ordering of the words will be an important aspect when combining the generated contents into a finalized product.\\

Earlier there was a mention of changing the difficulty in the middle of the game. Another way of making the options, would be to do this difficulty change gradually as the players progress. Starting off easy, and then getting harder and harder. Or the other way around, easier and easier, if that is preferable. If this is what is wanted, there has to be some sort of scale that shows what constitutes hard, medium and easy. When this is established, the algorithms can be made into generating the content on a declining or increasing scale. How much is going to be changed, and how much it will be modified each turn, is then up to the scaling system itself, or the players, if they are given the possibility to set this themselves.\\

While on the topic of gradually changing the content, another way that comes up, is to increase the costs and rewards based on stages.
Each stage could be a finite amount of turns, or a stage can change to the next one when a certain threshold has been reached, be it turns, resources gained, resources lost, etc.\\\\


The ways described above are singular ways of generating the options, however in a complete solution of the problem, one might want to combine two or more of these ways. 
We are using a combination of basing the options based on the location, as well as factions. Some of the events, i.e. the special events, are based on location, factions and standing. They get all this information from the previous events that has occurred, and by utilizing the memory of the application, it is able to give the players a "shock factor" that would not be possible with a traditional board game. Containing the information that has happened before, opens up the possibility to startle the players with new content based on previous events. 
By mixing in an element of randomness into the mixture, it is possible to change the entire feel of an event, as the values might be slightly out of context, but still enough in context that it can be made sense of. All these mixtures is what makes it possible for multiple ways of handling the events. And by creating the options for each event as soon as the players enter them, it is possible to create varied outcomes as well. Each option can have an outcome based on how it is formulated, and by having this, the events can become very different and the range of which they impact the players is potentially increased. 
If the events are gradually changing, then the memory part can be a big influence. It allows the application to "know" where in a game session it is, and from there, it can utilize different algorithms to change the difficulty, range of options and impact on the outcomes, that each event has. This can create a feeling of progression for the players, and make the feel of the game more consistent and make it feel like the game has more of a purpose to it.

\subsection{Layout of the map}
During development of the application, there was a discussion whether to use a pcg-algorithm in order to create the map, or to manually create it and have it saved. The conclusion was to use the L-System in order to be able to quickly generate maps, as having more than one map would give the players more replayability and diversity, and by using an L-System there was the possibility to mutate the rules of generation, and have a constantly changing layout. By changing the values such as the spreading angle of the island placement, the map would be different in looks, and by changing the number of iterations of expansion of the axiom, the map would become bigger or smaller. Then by introducing a random value for the angle and distancing of the islands, the maps could have a layout that would never look the same, and that would have a variation of turns and angles and distances from one island to another. However, by doing this, the calculation time for the L-System could become very large, and that could also ruin the player's interest for the game. So by compromising and rather create a multitude of different pre-set patterns, the execution time can easily be managed to be within the time frame that is required, and it allows for more controlled diversity within the layouts of the map.\\

A rather substantial problem with the L-System, is that it can become very large, very fast. This means that it can reduce the quality of the application, and consume too much of the resources of the device the application is running on. If the system is too big, and taking up too much resources, it can potentially freeze the system, and overheat the device. This is of course not a preferred scenario, and so it is better to have a controlled environment where construction of the rules and axioms of the different layouts to be produced by the system can be monitored and managed.\\

Our solution has a total of seven different and diverse map layouts, that are available within the code, however, for the sake of managing and testing the game and making sure the produced results and gameplay is coherent, only one of them will be used. This decision was made, because the need for some continuity was needed in order to make sure that all the aspects of the game; the flow, the board, the events, user interaction, etc. all were working as they should. 
Some of the other maps were smaller, with fewer possible destinations and events, and so they could be suited for a tutorial if that is desired. But for a full game, the need for a bigger map layout with all the islands in a set location is outweighing the need for diversity and changeable maps.


\subsection{Board layout}
During the development of Archipelago, the layout out the board changed many times. The original layout consisted of a partitioned grid of boxes, wherein the rooms would be placed. The partitioning were made so that each part had a different color that indicated the tier level of the castle. Each tier would require a certain amount of crystals in order to be functional. 
As the development process progressed, the layout changed. With each prototype came a new layout, and additional feature were added. These features were cargo rooms for storing of the players' resources, a crystal bar for keeping track of the crystal tokens, an event box for when the players would send out crew tokens on events, and a building box and for putting crew and resource tokens in when managing the castle and building new rooms or upgrading existing ones. 
\subsection{Tokens and rooms}
Archipelago has a multitude of tokens and rooms, and over all iterations of the development process, they have been redesigned, added or removed from the game. Each token that would be in the game had to have some sort of functionality and purpose, otherwise they would be rendered useless and feel like more of a nuisance than a contribution to the game. One aspect that ended up being completely removed from the game, was the diplomacy room and specialization tokens. Originally there were meant to be three types of event types; Gathering, Research and Diplomacy. However as the development of the game continued, and with feedback from playtests, the Diplomacy events ended up being scratched. It did not get the desired results that were wanted, and it did not give the experience we wanted for the game. Instead of having a diplomacy aspect to the game, the events would instead have diplomacy implemented through the use of special events and a faction system. This made the game more fluent and gave the game a better feel of being polished, as the faction system would both add to the story and setting of the game, as well as giving the feel of conflict in the game with each faction being against each other, and the players having to choose their sides in these conflicts either directly through special fighting events, or more indirectly through memory based special events.

\subsection{Story}
In the start, there was not much story or concept of story, since it took a while before settling on a theme for the game. However, as we came up with different ideas for different themes, a part of the development was to have some sort of story basis in the back of our heads that would combine with the overall theme. Since we had the concept of a node-based system, every story and theme we would come up with, would have to support this. The world would be made up of a large overview of the map that had smaller "nodes" that the players would be able to visit. Each one of these nodes would then have smaller nodes within them. 
With a theme of pirates, the story would become something along the lines of the pirates would travel on the oceans from island to island, from port to port, and there they would be plundering all the villages and taverns they could find. In this case, each outer node would have smaller areas within it that would be the different places the island would have, like a tavern, village or other types of hubs. We were also considering the concept of space. Having a spaceship that would travel through the universe, visiting planet after planet, and exploring the areas of each one of these. Since the whole space scenario is a rather big one, and the science-fiction stories are many, coming up with an original and consistent story for the game, would be a rather immense task, and the risk of it being too generic or on the other side, too abstract, was something that had to be kept in mind. 
In the end, we landed with a more fantasy theme, with a floating castle that would travel around an unknown world where other people and factions would roam the lands and fight amongst each other. The story behind this scenario is that you, the player, are in control of this large floating castle, that is lost in a new and unexplored world. It is up to you to make sure that your castle and its crew are able to get to the destination safely. You will have to explore the vast world and its islands that are scattered around in all directions and expand upon your castle and try to power it up by getting more crystals like the ones that are powering up your castle. Along the way, you will encounter new races and factions, and see vast forests, huge lakes, old villages and factories, and it is up to you and your crew to gather what you can from these places and rebuild your castle and get home safely. You will make new allies and enemies along the way, so be careful not to aggravate the people you meet, or they might just attack your crew or your castle. Manage the castle efficiently, or you might just get stuck, floating in mid air in an unknown world, never to be able to return home.

\subsection{Theme}
There was a lot of different themes going around during construction of the project. The initial thought was Space and something in the lines of FTL: Faster Than Light. 
Other themes that came up were "Western Caravan" in a sort of "Mad Max" setting, "Pirates at sea" travelling from islands to islands, and plundering what they could find, "Magical Flying Castle" that would fly through a vast world of floating islands with unexplored areas of varying types and locations.
The last one was chosen. The reason for this choice, is that it gives us a feeling of familiarity, as it is in a fantasy setting, and most people are familiar with some sort of fantasy story, whether it is "The Lord of the Rings", "The Chronicles of Narnia" or other fantasy stories. Most games that are in this genre and has creatures or factions, usually have a connected base that is the basis for all fantasy. Usually it contains Orcs, Elves, Dwarves, etc. and this makes it easier for players to accept how the feel of the overall game story is set. 
Going with the theme of a flying castle roaming the skies, the setting itself would be some combination of the dark ages mixed with fantasy. When you see a stone castle, you usually think of the dark ages, and when that castle is flying, the thoughts go to a more made up world, a fantasy world. 
Having this fantasy aspect in the theme, allows there to be almost any types of creatures and areas, as they can be created from scratch and added into the story, as fantasy have room for any new things that might be created.

\subsection{Gameplay}
\subsection{Connection between Board and App}


\section{Collaborative game} 
\section{The 2 phases of the game}
\section{A management-game}
\section{The result of the game}
\section{Future work}
In this part, we will discuss what possible work could be done in the future. What we would like to implement, thought on how to do that, and what could have been done differently in order to make this easier in the future.
\subsection{Better use of saved data}
\label{sec:savdat}
One of the big impacts this project brought to light, was the use of saved events and its data to generate new events that were based on those. In this solution, we save the events that happen over the course of the game, and we use them in a rather minimalistic way, more as a proof of concept. However, it would be interesting to see how this data could be used more efficiently over an entire game session. Generating more experience driven content, that would have a bigger impact on the players' experience, by creating other mechanics in the game, is one thought that comes to mind. 

The saved data could be used in ways which a board game could never compete. One could use the saved data to challenge the players either more or less, by knowing the amount of resources they have collected, and tailoring the possibilities from that knowledge. In this way the game would either challenge the players to use their resources wisely or give them access to a resource which has been sparse in the previous events. 

The special events could really play to what the players had been doing, in terms of were and for who, giving the players a greater feel of involvement in the world. This could be shown with some sort of faction overlay, which could change each time you dealt with the different factions. It could be possible to have some sort of background faction warfare with variables being influenced by how the players interact with the game.

Also a story could be brewed by linking all the outcomes of the events. In the end building a short story based on the players events. Using a text algorithm of sorts to create a story based on the factions relationships and the deals made at each point of interest. 

By using the current layout, one could even imagine that the app could piece together the state of the board game, using the input from the events. Whenever the players resolves the events, they declare, indirectly the tells the app how they have used their resources. Saving this could help to give a more complete look of how the players are doing and surprise the players by revealing to them in events that the app knows what they have built.

In the end the saved data could be used in many ways to give the players a feeling of a game which reacts to their input, even without them having directly to manipulate the app with the results and state of their board.

\subsection{More options and outcomes}
At this point in time, there are a finite number of possible outcome types, rewards and penalties. For a future version of the game, it would be interesting to see how the game would be experienced if there were more types of tokens to be played around with. It would also be nice to have more flavour text pieces that could be combined, maybe in a new way, and presented to the players. 

Right now the system is capable of combining the different parts of the game and generate events with flavour text, using combination of the board pieces and flavour text strings.
The system is built such that more pieces could be added, along with flavour text bits for each of them, and still generate meaningful events. 

However, there is right now around 3-7 text strings for each of the board pieces, all of which can be combined which each other. This could of course be increased, but it would also be interesting to generate text which is capable of having some sort of interrelation between the pieces. 
This could perhaps be accomplished using some sort of grammar such as the L-systems, which could take the current text being built and use it to create a better interrelation. 
The grammar could as an example relate Alchemy points to Castle crew and base the flavour text on some sort of potions to improve the crew, or relate the alchemical potency to how it improves the machinery used in a specific event. 
Having this relation brings the game more to life and makes the players feel more immersed in the experience.

In the end, having more pieces, variety of flavour, and ways of combining the flavour, would be like creating an expansion pack of cards that would be added to the physical board game.

\subsection{Additional features based on the map}
The current map layout generates a larger structure of floating islands which you can visit in no particular order. The map contains floating islands each with events tied to it and different locations available.

However the map is an unused canvas which could have more features to better engage the players in moving around on the map. 
There could be included places of interest, where special quest could be implemented. A chain of quest linked in creating a short story or other sub-plots. 
As said above in section \ref{sec:savdat}, there is also a possibility of having factional warfare, using the saved events. This could both be displayed and engaged directly on the map. 
Timed events could appear based on factional changes and the events which have been resolved by the players. The events could appear on the map in a small vicinity of the player location. This would engage the players in checking out how the map situation is unfolding. 

Another way to increase the exploration is to hide the end goal. Then perhaps revealing the goal through a quest chain or through some sort of cost of materials. The general direction of the goal could be known to the player, but you have to either complete some quest or guess where the goal were through hints given throughout the game.

The chain quest could be one which spawns the goal once all the quest are completed. Having the players creating a portal to take them home after the quest is done.
\subsection{Other potential mechanics}

\section{PCG contribution and it's benefits}
What the PCG part did for this project, was to remove the need for the physical part of the game to have cards, map-board, a pre-written explanation on how to set up the map locations, and it removed the need for dice rolls. This being a collaborative game, the focus of the players needed to be more on each other and the "story" of the game, rather than having to focus on reading from a piece of paper each turn, each time one rolls a die, and each time a card would be picked and had to be combined.

One of the biggest ways that PCG has contributed to the game, is to have given the game access to memory. This means that the game can suddenly surprise the players by presenting a newly generated event that is based on occurrences that happened maybe 15 turns ago. Unless the players have a book to write down every little detail of the story as the game unfolds, this would not be a very likely scenario to carry out, without the use of PCG. 
Having memory also opens up for the possibility of hiding information from players. Take the faction system for example: most of the information is hidden, and the only thing the players see is the little dialogue box that pops up when a faction's allegiance has been changed from one to another. This means that the only information the players have available is their current standing with the factions, and they will have to remember it themselves, as there is currently no way to see the current standing with any given faction, except for when said faction standing is changed. If the digital aspect of the game was not there, then the players would have to take note on the standing with each faction, and whenever a faction specific event would happen, they would have to use a different combination method for the events and the flavour, and maybe even have a separate deck of cards, which would mean more to keep track of, and more to carry around and set up in the game.\\
As for the events, the way PCG contributes, is to allow for quick gathering of information about the event details. The algorithm used generates varied results every time, and gives the game an expansion possibility that would not be the same if the events were selected from a pre-made static deck of event-cards. In order to expand upon the game and make it bigger and better, all that is needed, is to add more types of locations, factions, Options and outcomes, and flavour blocks for each of these into the XML file that contains all the information about the game, and then it would be like having a 500 piece deck of card added to the game.\\
When it comes to the map, the layout possibilities that PCG enables, are endless. Right now the system uses an L-System to generate the layout and place the islands at their correct locations. This is quick and efficient, and allows for endless ways to set up the map. By adding more rules, and specific interpretation logic for them, into the system, each new map can be made to have different experiences to them. You could maybe make a map that looks like the actual world? 
On top of just changing the map's layout, you can add quests and puzzles into the map itself. If combining the L-System with graph grammars, the map can be made so that one island has a quest assigned to it, and that quest could for instance have the players move towards another side of the map, to one specific island. The end island could then be hidden from the players completely, and only be showed/enabled when the players had reached a certain part of the quest line.

If the map was to be analogue and have all these possibilities, the physical weight of the game would potentially be enormous. Either all the map layouts would have to be able to be made with one set of pieces, or each layout would have to be made individually with their own pieces. And if there would be quests and quest-lines assigned to the maps, the rules for how they were played out would have to be thought out in advance, and they would probably make for a very "similar" gameplay each time the game is played. PCG, however, enables the game to have varied contents every time.\\

By utilizing the memory of the application, the events and the content within them can be changed every time. It also makes it possible to have a difficulty curve within the game. By saving resources gained and lost on the events, the following events can use this information and take it into account when generating new ones. If the players have not received enough of one resource, the application can catch that, as it is saved in the memory, and then it can take countermeasures to make sure the game is able to progress. This would not be possible without the memory, and if the game was purely analogue, the players would either have to cheat and take extra resources without it being in the mechanics, or they could potentially lose the game, or have to start over. Of course, had this been a purely analogue game, the mechanics would have been made differently to account for things like this, but as it is not, the memory of the application serves as a valuable tool both for the game in its current state, and for possible future work on it.


\section{App vs. boardgame design challenges}
\section{Benefits of having memory in the app}
As described in the \textit{\textbf{PCG contribution and it's benefits}} section of this paper, having memory in the app is a big benefit to the game in total.
It opens up the possibility of having ever-changing events and content within the game, as the newly generated content can be based on previous content that has been saved into the memory of the app.
It allows the game to have player control in terms of the resources given to the players, along with possible negative effects to the players; penalties. The memory can influence the PCG algorithms in ways that would otherwise have to be done manually, e.g. if at the end of a turn, the players would have to type in how many resources they have of each type, and what they have spent, etc.
Since there is now memory in the application, calculations can be made to see which types of options the players select during an event. For instance, if one event has a third option that requires the players to have a specialization in healing, the application would then be able to calculate that the players have used at least 4 building materials, along with 2 alchemy points in order to get that room. The application would then do the calculations and save the result in the app, that the players now have 4 less materials, and 2 less alchemy points. Without the memory, this would not be possible, and the application would rather have to have set rules for how the events could be made up, or the players would have to give the app inputs so that it would know where to continue.
So one of the biggest benefits with having memory in the app, is that it allows for continuous generation of content that is directly connected to preceding events and content, and the current state of the players' resources.

\section{Possible alternatives to our solution}
One of the most obvious alternatives to our solution, is to create a complete board game, or a complete digital game, instead of using both as a hybrid. However this would not be in the scope of the project, as we want to explore the space between PCG and Boardgames by the use of an application and the making of a hybrid game.


\section{Team Dynamics}





